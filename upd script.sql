BEGIN TRANSACTION

UPDATE   

SHABILITACAOALUNOCOMPL 
SET
SHABILITACAOALUNOCOMPL.DATAINICIAL = :datainicial , 
SHABILITACAOALUNOCOMPL.DATAFINAL = :datafinal,
SHABILITACAOALUNOCOMPL.RECMODIFIEDBY = :codusuario,
SHABILITACAOALUNOCOMPL.RECMODIFIEDON = GETDATE()

FROM   

SHABILITACAOALUNOCOMPL  

INNER JOIN SHABILITACAOALUNO ON 	
SHABILITACAOALUNO.CODCOLIGADA = SHABILITACAOALUNOCOMPL.CODCOLIGADA  AND SHABILITACAOALUNO.IDHABILITACAOFILIAL = SHABILITACAOALUNOCOMPL.IDHABILITACAOFILIAL  AND SHABILITACAOALUNO.RA = SHABILITACAOALUNOCOMPL.RA  

INNER JOIN SMATRICPL ON 	
SMATRICPL.CODCOLIGADA = SHABILITACAOALUNO.CODCOLIGADA  
AND SMATRICPL.IDHABILITACAOFILIAL = SHABILITACAOALUNO.IDHABILITACAOFILIAL  
AND SMATRICPL.RA = SHABILITACAOALUNO.RA  

INNER JOIN STURMA ON  	
STURMA.CODCOLIGADA = SMATRICPL.CODCOLIGADA  
AND STURMA.CODFILIAL = SMATRICPL.CODFILIAL  
AND STURMA.CODTURMA = SMATRICPL.CODTURMA  
AND STURMA.IDPERLET = SMATRICPL.IDPERLET  
AND STURMA.IDHABILITACAOFILIAL = SMATRICPL.IDHABILITACAOFILIAL
WHERE       
	STURMA.CODTURMA    		=	:codturma 
AND STURMA.CODFILIAL 		=	:codfilial 
AND STURMA.CODCOLIGADA 		=	:codcoligada 
AND STURMA.IDHABILITACAOFILIAL 	= :idhabilitacaofilial
AND STURMA.IDPERLET  = :idperlet

COMMIT 